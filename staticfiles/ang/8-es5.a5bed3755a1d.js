!function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var c,r=t[Symbol.iterator]();!(a=(c=r.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(s){i=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{vfUp:function(t,a,o){"use strict";o.r(a),o.d(a,"CustomersModule",(function(){return tt}));var c=o("ofXK"),r=o("PCNd"),s=o("kt0X"),p=function(t){return t.LoadAppointments="[Customers] LoadAppointments",t.LoadAppointmentsSuccess="[Customers] LoadAppointments Success",t.LoadAppointmentsFail="[Customers] LoadAppointments Fail",t.SetAppointmentFilterStatus="[Customers] Set Appointment Status",t.SetAppointmentFilterDate="[Customers] Set Appointment Date",t}({}),u=function t(){i(this,t),this.type=p.LoadAppointments},l=function t(e){i(this,t),this.payload=e,this.type=p.LoadAppointmentsSuccess},m=function t(e){i(this,t),this.payload=e,this.type=p.LoadAppointmentsFail},b=function(t){return t[t.All=0]="All",t[t.Pending=1]="Pending",t[t.Accepted=2]="Accepted",t[t.Rejected=3]="Rejected",t}({}),d=function t(e){i(this,t),this.payload=e,this.type=p.SetAppointmentFilterStatus},f=function(t){return t[t.All=0]="All",t[t.Future=1]="Future",t[t.Past=2]="Past",t}({}),h=function t(e){i(this,t),this.payload=e,this.type=p.SetAppointmentFilterDate},g=o("wd/R"),y={appointmentsFilter:{from_date:g.utc()},appointments:[],apiError:null};function v(t,e){var n=Object.assign({},t);switch(e){case b.All:delete n.status;break;case b.Pending:n.status="P";break;case b.Accepted:n.status="A";break;case b.Rejected:n.status="R"}return n}function F(t,e){var n=Object.assign({},t);switch(delete n.to_date,delete n.from_date,e){case f.All:break;case f.Future:n.from_date=g.utc();break;case f.Past:n.to_date=g.utc()}return n}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p.LoadAppointmentsSuccess:return Object.assign(Object.assign({},t),{appointments:e.payload,apiError:null});case p.LoadAppointmentsFail:return Object.assign(Object.assign({},t),{appointments:[],apiError:e.payload});case p.SetAppointmentFilterStatus:return Object.assign(Object.assign({},t),{appointmentsFilter:v(t.appointmentsFilter,e.payload)});case p.SetAppointmentFilterDate:return Object.assign(Object.assign({},t),{appointmentsFilter:F(t.appointmentsFilter,e.payload)});default:return t}}var j,O,w,S=Object(s.o)("customers"),C=(Object(s.q)(S,(function(t){return t.apiError})),Object(s.q)(S,(function(t){return t.appointments}))),k=Object(s.q)(S,(function(t){return t.appointmentsFilter})),W=o("snw9"),V=o("mrSG"),D=o("LRne"),P=o("zp1y"),L=o("5+tZ"),x=o("lJxs"),$=o("JIr8"),M=o("fXoL"),H=o("2Sd8"),N=o("3WbM"),R=((j=function t(e,a,o,c){var r=this;i(this,t),this.actions$=e,this.store=a,this.appointmentClient=o,this.toastService=c,this.LoadAppointments$=this.actions$.pipe(Object(W.e)(p.LoadAppointments),Object(P.a)(this.store.pipe(Object(s.t)(k))),Object(L.a)((function(t){var e=n(t,2),a=(e[0],e[1]);return r.appointmentClient.get(a).pipe(Object(x.a)((function(t){return new l(t.results)})),Object($.a)((function(t){return Object(D.a)(new m(t))})))}))),this.SetAppointmentFilterDate$=this.actions$.pipe(Object(W.e)(p.SetAppointmentFilterDate),Object(x.a)((function(t){return new u}))),this.SetAppointmentFilterStatus$=this.actions$.pipe(Object(W.e)(p.SetAppointmentFilterStatus),Object(x.a)((function(t){return new u})))}).\u0275fac=function(t){return new(t||j)(M.ac(W.a),M.ac(s.h),M.ac(H.c),M.ac(N.a))},j.\u0275prov=M.Mb({token:j,factory:j.\u0275fac}),Object(V.a)([Object(W.b)()],j.prototype,"LoadAppointments$",void 0),Object(V.a)([Object(W.b)()],j.prototype,"SetAppointmentFilterDate$",void 0),Object(V.a)([Object(W.b)()],j.prototype,"SetAppointmentFilterStatus$",void 0),j),_=o("LjFu"),E=o("tyNb"),I=o("jaxi"),q=o("7EHt"),J=o("NFeN"),K=((w=function(){function t(){i(this,t)}return e(t,[{key:"transform",value:function(t){switch(t){case"A":return"accepted";case"M":return"rejected";default:return"pending"}}}]),t}()).\u0275fac=function(t){return new(t||w)},w.\u0275pipe=M.Pb({name:"appointmentStatus",type:w,pure:!0}),w),U=((O=function t(){i(this,t)}).\u0275fac=function(t){return new(t||O)},O.\u0275cmp=M.Kb({type:O,selectors:[["customers-appointment-card"]],inputs:{appointment:"appointment"},decls:24,vars:12,consts:[[1,"card","m-auto"],[1,"m-auto"],[1,"col-sm-12","col-md-6","d-flex","align-self-center"],[1,"col-sm-12","col-md-6","m-auto"],[1,"row","text-left"],[1,"col-4"],[3,"src"],[1,"text-muted"]],template:function(t,e){1&t&&(M.Wb(0,"div",0),M.Wb(1,"mat-expansion-panel"),M.Wb(2,"mat-expansion-panel-header"),M.Wb(3,"mat-panel-title",1),M.Fc(4),M.Vb(),M.Wb(5,"mat-panel-description"),M.Wb(6,"div",2),M.Wb(7,"mat-icon"),M.Fc(8,"event"),M.Vb(),M.Fc(9),M.Vb(),M.Wb(10,"div",3),M.Fc(11),M.Vb(),M.Vb(),M.Vb(),M.Wb(12,"div",4),M.Wb(13,"div",5),M.Rb(14,"img",6),M.Vb(),M.Wb(15,"div",5),M.Wb(16,"h4"),M.Fc(17),M.Vb(),M.Wb(18,"h4",7),M.Fc(19),M.Vb(),M.Fc(20),M.Vb(),M.Wb(21,"div",5),M.Fc(22),M.jc(23,"appointmentStatus"),M.Vb(),M.Vb(),M.Vb(),M.Vb()),2&t&&(M.Db(4),M.Hc(" ",e.appointment.companyName," "),M.Db(5),M.Hc(" ",e.appointment.start.format("DD/MM/YY")," "),M.Db(2),M.Ic(" ",e.appointment.start.format("HH:mm")," ",e.appointment.end.format("HH:mm")," "),M.Db(3),M.oc("src",e.appointment.employee.photoUrl,M.yc),M.Db(3),M.Gc(e.appointment.employee.name),M.Db(2),M.Hc(" ",e.appointment.service.name," "),M.Db(1),M.Hc(" ",e.appointment.customerNotes," "),M.Db(2),M.Ic(" ",M.kc(23,10,e.appointment.status)," ",e.appointment.customerNotes," "))},directives:[q.b,q.d,q.e,q.c,J.a],pipes:[K],styles:["div.card[_ngcontent-%COMP%]{max-width:40rem}img[_ngcontent-%COMP%]{border-radius:50%;-o-object-fit:cover;object-fit:cover;width:100px;height:100px}"]}),O);function X(t,e){1&t&&M.Rb(0,"customers-appointment-card",8),2&t&&M.nc("appointment",e.$implicit)}var G,T,Y,z,Q=((G=function(){function t(){i(this,t),this.statusChange=new M.o,this.dateFrameChange=new M.o}return e(t,[{key:"dateAll",value:function(){this.dateFrameChange.emit(f.All)}},{key:"datePast",value:function(){this.dateFrameChange.emit(f.Past)}},{key:"dateFuture",value:function(){this.dateFrameChange.emit(f.Future)}},{key:"statusAll",value:function(){this.statusChange.emit(b.All)}},{key:"statusPending",value:function(){this.statusChange.emit(b.Pending)}},{key:"statusConfirmed",value:function(){this.statusChange.emit(b.Accepted)}},{key:"statusCanceled",value:function(){this.statusChange.emit(b.Rejected)}}]),t}()).\u0275fac=function(t){return new(t||G)},G.\u0275cmp=M.Kb({type:G,selectors:[["customers-appointments"]],inputs:{appointments:"appointments"},outputs:{statusChange:"statusChange",dateFrameChange:"dateFrameChange"},decls:20,vars:4,consts:[[1,"container","align-self-center","pt-4"],[1,"row"],[1,"col-12","text-center"],[1,"mr-2"],[3,"click"],[3,"checked","click"],[1,"ml-2",3,"value"],["class","col-12 m-1",3,"appointment",4,"ngFor","ngForOf"],[1,"col-12","m-1",3,"appointment"]],template:function(t,e){1&t&&(M.Wb(0,"div",0),M.Wb(1,"div",1),M.Wb(2,"div",2),M.Wb(3,"mat-button-toggle-group",3),M.Wb(4,"mat-button-toggle",4),M.ec("click",(function(){return e.dateAll()})),M.Fc(5,"all"),M.Vb(),M.Wb(6,"mat-button-toggle",4),M.ec("click",(function(){return e.datePast()})),M.Fc(7,"past"),M.Vb(),M.Wb(8,"mat-button-toggle",5),M.ec("click",(function(){return e.dateFuture()})),M.Fc(9,"future"),M.Vb(),M.Vb(),M.Wb(10,"mat-button-toggle-group",6),M.Wb(11,"mat-button-toggle",5),M.ec("click",(function(){return e.statusAll()})),M.Fc(12,"all"),M.Vb(),M.Wb(13,"mat-button-toggle",4),M.ec("click",(function(){return e.statusPending()})),M.Fc(14,"pending"),M.Vb(),M.Wb(15,"mat-button-toggle",4),M.ec("click",(function(){return e.statusConfirmed()})),M.Fc(16,"confirmed"),M.Vb(),M.Wb(17,"mat-button-toggle",4),M.ec("click",(function(){return e.statusCanceled()})),M.Fc(18,"canceled"),M.Vb(),M.Vb(),M.Vb(),M.Dc(19,X,1,1,"customers-appointment-card",7),M.Vb(),M.Vb()),2&t&&(M.Db(8),M.nc("checked",!0),M.Db(2),M.nc("value",0),M.Db(1),M.nc("checked",!0),M.Db(8),M.nc("ngForOf",e.appointments))},directives:[I.b,I.a,c.j,U],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:64px;bottom:0;left:0;right:0}"]}),G),Z=[{path:"requests",component:(T=function(){function t(e){i(this,t),this.store=e}return e(t,[{key:"ngOnInit",value:function(){this.store.dispatch(new u),this.appointments$=this.store.pipe(Object(s.t)(C))}},{key:"updateStatus",value:function(t){this.store.dispatch(new d(t))}},{key:"updateDateFrame",value:function(t){this.store.dispatch(new h(t))}}]),t}(),T.\u0275fac=function(t){return new(t||T)(M.Qb(s.h))},T.\u0275cmp=M.Kb({type:T,selectors:[["app-appointments-page"]],decls:2,vars:3,consts:[[3,"appointments","statusChange","dateFrameChange"]],template:function(t,e){1&t&&(M.Wb(0,"customers-appointments",0),M.ec("statusChange",(function(t){return e.updateStatus(t)}))("dateFrameChange",(function(t){return e.updateDateFrame(t)})),M.jc(1,"async"),M.Vb()),2&t&&M.nc("appointments",M.kc(1,1,e.appointments$))},directives:[Q],pipes:[c.b],styles:[""]}),T),canActivate:[_.a]}],B=((z=function t(){i(this,t)}).\u0275mod=M.Ob({type:z}),z.\u0275inj=M.Nb({factory:function(t){return new(t||z)},imports:[[E.f.forChild(Z)],E.f]}),z),tt=((Y=function t(){i(this,t)}).\u0275mod=M.Ob({type:Y}),Y.\u0275inj=M.Nb({factory:function(t){return new(t||Y)},imports:[[c.c,r.a,B,s.j.forFeature("customers",A),W.c.forFeature([R])]]}),Y)}}])}();