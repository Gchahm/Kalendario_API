(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{vfUp:function(t,e,s){"use strict";s.r(e),s.d(e,"CustomersModule",(function(){return z}));var c=s("ofXK"),n=s("PCNd"),a=s("kt0X"),r=function(t){return t.RequestRequests="[Customers] LoadAppointments",t.UpdateRequests="[Customers] LoadAppointments Success",t.RequestsFail="[Customers] LoadAppointments Fail",t.SetAppointmentFilterStatus="[Customers] Set Appointment Status",t.SetAppointmentFilterDate="[Customers] Set Appointment Date",t.SetSelectedRequestId="[Customers] Set Selected Request ID",t}({});class o{constructor(){this.type=r.RequestRequests}}class i{constructor(t){this.payload=t,this.type=r.UpdateRequests}}class u{constructor(t){this.payload=t,this.type=r.RequestsFail}}var l=function(t){return t[t.All=0]="All",t[t.Pending=1]="Pending",t[t.Accepted=2]="Accepted",t[t.Rejected=3]="Rejected",t}({});class d{constructor(t){this.payload=t,this.type=r.SetAppointmentFilterStatus}}var p=function(t){return t[t.All=0]="All",t[t.Future=1]="Future",t[t.Past=2]="Past",t}({});class b{constructor(t){this.payload=t,this.type=r.SetAppointmentFilterDate}}class m{constructor(t){this.id=t,this.type=r.SetSelectedRequestId}}var h=s("wd/R");const g={appointmentsFilter:{from_date:h.utc()},requests:[],selectedRequestId:null,apiError:null};function f(t,e){const s=Object.assign({},t);switch(e){case l.All:delete s.status;break;case l.Pending:s.status="P";break;case l.Accepted:s.status="A";break;case l.Rejected:s.status="R"}return s}function q(t,e){const s=Object.assign({},t);switch(delete s.to_date,delete s.from_date,e){case p.All:break;case p.Future:s.from_date=h.utc();break;case p.Past:s.to_date=h.utc()}return s}function j(t=g,e){switch(e.type){case r.UpdateRequests:return Object.assign(Object.assign({},t),{requests:e.payload,apiError:null});case r.RequestsFail:return Object.assign(Object.assign({},t),{requests:[],apiError:e.payload});case r.SetAppointmentFilterStatus:return Object.assign(Object.assign({},t),{appointmentsFilter:f(t.appointmentsFilter,e.payload)});case r.SetAppointmentFilterDate:return Object.assign(Object.assign({},t),{appointmentsFilter:q(t.appointmentsFilter,e.payload)});case r.SetSelectedRequestId:return Object.assign(Object.assign({},t),{selectedRequestId:e.id});default:return t}}const O=Object(a.o)("customers"),F=(Object(a.q)(O,t=>t.apiError),Object(a.q)(O,t=>t.requests)),y=Object(a.q)(O,t=>t),C=Object(a.q)(O,t=>t.selectedRequestId),R=Object(a.q)(F,C,(t,e)=>t.find(t=>t.id===e));var v=s("snw9"),w=s("mrSG"),A=s("LRne"),k=s("zp1y"),S=s("5+tZ"),P=s("lJxs"),W=s("JIr8"),V=s("fXoL"),D=s("2Sd8"),I=s("3WbM");let $=(()=>{class t{constructor(t,e,s,c){this.actions$=t,this.store=e,this.requestClient=s,this.toastService=c,this.RequestRequests$=this.actions$.pipe(Object(v.e)(r.RequestRequests),Object(k.a)(this.store.pipe(Object(a.t)(y))),Object(S.a)(([t,e])=>this.requestClient.get(e).pipe(Object(P.a)(t=>new i(t.results)),Object(W.a)(t=>Object(A.a)(new u(t))))))}}return t.\u0275fac=function(e){return new(e||t)(V.ac(v.a),V.ac(a.h),V.ac(D.h),V.ac(I.a))},t.\u0275prov=V.Mb({token:t,factory:t.\u0275fac}),Object(w.a)([Object(v.b)()],t.prototype,"RequestRequests$",void 0),t})();var x=s("LjFu"),_=s("tyNb"),G=s("jaxi"),E=s("3lmY"),L=s("6t+O"),M=s("vqYj");function U(t,e){if(1&t&&V.Rb(0,"shared-company-avatar",1),2&t){const t=e.ngIf;V.oc("logo",t.avatarUrl)("name",t.name)("address",t.address)}}let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=V.Kb({type:t,selectors:[["customers-request-card"]],inputs:{request:"request"},decls:1,vars:1,consts:[[3,"logo","name","address",4,"ngIf"],[3,"logo","name","address"]],template:function(t,e){1&t&&V.Ec(0,U,1,3,"shared-company-avatar",0),2&t&&V.oc("ngIf",e.request.owner)},directives:[c.l,M.a],styles:["div.card[_ngcontent-%COMP%]{max-width:40rem}img[_ngcontent-%COMP%]{border-radius:50%;-o-object-fit:cover;object-fit:cover;width:100px;height:100px}"]}),t})();function K(t,e){if(1&t){const t=V.Xb();V.Wb(0,"customers-request-card",10),V.ec("click",(function(){V.yc(t);const s=e.$implicit;return V.ic().select.emit(s.id)})),V.Vb()}2&t&&V.oc("request",e.$implicit)}let N=(()=>{class t{constructor(){this.statusChange=new V.o,this.dateFrameChange=new V.o,this.select=new V.o}dateAll(){this.dateFrameChange.emit(p.All)}datePast(){this.dateFrameChange.emit(p.Past)}dateFuture(){this.dateFrameChange.emit(p.Future)}statusAll(){this.statusChange.emit(l.All)}statusPending(){this.statusChange.emit(l.Pending)}statusConfirmed(){this.statusChange.emit(l.Accepted)}statusCanceled(){this.statusChange.emit(l.Rejected)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=V.Kb({type:t,selectors:[["customers-requests"]],inputs:{requests:"requests",selected:"selected"},outputs:{statusChange:"statusChange",dateFrameChange:"dateFrameChange",select:"select"},decls:21,vars:5,consts:[[1,"container","align-self-center","pt-4"],[1,"row"],[1,"col-md-6","col-sm-12","text-center"],[1,"mr-2"],[3,"click"],[3,"checked","click"],[1,"ml-2",3,"value"],[3,"request","click",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12"],[3,"request"],[3,"request","click"]],template:function(t,e){1&t&&(V.Wb(0,"div",0),V.Wb(1,"div",1),V.Wb(2,"div",2),V.Wb(3,"mat-button-toggle-group",3),V.Wb(4,"mat-button-toggle",4),V.ec("click",(function(){return e.datePast()})),V.Gc(5,"past"),V.Vb(),V.Wb(6,"mat-button-toggle",5),V.ec("click",(function(){return e.dateFuture()})),V.Gc(7,"upcoming"),V.Vb(),V.Vb(),V.Wb(8,"mat-button-toggle-group",6),V.Wb(9,"mat-button-toggle",5),V.ec("click",(function(){return e.statusAll()})),V.Gc(10,"all"),V.Vb(),V.Wb(11,"mat-button-toggle",4),V.ec("click",(function(){return e.statusPending()})),V.Gc(12,"pending"),V.Vb(),V.Wb(13,"mat-button-toggle",4),V.ec("click",(function(){return e.statusConfirmed()})),V.Gc(14,"confirmed"),V.Vb(),V.Wb(15,"mat-button-toggle",4),V.ec("click",(function(){return e.statusCanceled()})),V.Gc(16,"canceled"),V.Vb(),V.Vb(),V.Wb(17,"app-kalendario-card"),V.Ec(18,K,1,1,"customers-request-card",7),V.Vb(),V.Vb(),V.Wb(19,"div",8),V.Rb(20,"company-request",9),V.Vb(),V.Vb(),V.Vb()),2&t&&(V.Db(6),V.oc("checked",!0),V.Db(2),V.oc("value",0),V.Db(1),V.oc("checked",!0),V.Db(9),V.oc("ngForOf",e.requests),V.Db(2),V.oc("request",e.selected))},directives:[G.b,G.a,E.a,c.k,L.a,J],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:64px;bottom:0;left:0;right:0}"]}),t})();const X=[{path:"requests",component:(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.store.dispatch(new o),this.requests$=this.store.pipe(Object(a.t)(F)),this.selected$=this.store.pipe(Object(a.t)(R))}updateStatus(t){this.store.dispatch(new d(t))}updateDateFrame(t){this.store.dispatch(new b(t))}selectRequest(t){this.store.dispatch(new m(t))}}return t.\u0275fac=function(e){return new(e||t)(V.Qb(a.h))},t.\u0275cmp=V.Kb({type:t,selectors:[["app-requests-page"]],decls:3,vars:6,consts:[[3,"requests","selected","statusChange","dateFrameChange","select"]],template:function(t,e){1&t&&(V.Wb(0,"customers-requests",0),V.ec("statusChange",(function(t){return e.updateStatus(t)}))("dateFrameChange",(function(t){return e.updateDateFrame(t)}))("select",(function(t){return e.selectRequest(t)})),V.jc(1,"async"),V.jc(2,"async"),V.Vb()),2&t&&V.oc("requests",V.kc(1,2,e.requests$))("selected",V.kc(2,4,e.selected$))},directives:[N],pipes:[c.b],styles:[""]}),t})(),canActivate:[x.a]}];let Y=(()=>{class t{}return t.\u0275mod=V.Ob({type:t}),t.\u0275inj=V.Nb({factory:function(e){return new(e||t)},imports:[[_.f.forChild(X)],_.f]}),t})(),z=(()=>{class t{}return t.\u0275mod=V.Ob({type:t}),t.\u0275inj=V.Nb({factory:function(e){return new(e||t)},imports:[[c.c,n.a,Y,a.j.forFeature("customers",j),v.c.forFeature([$])]]}),t})()}}]);