!function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],s=!0,r=!1,a=void 0;try{for(var c,i=t[Symbol.iterator]();!(s=(c=i.next()).done)&&(n.push(c.value),!e||n.length!==e);s=!0);}catch(u){r=!0,a=u}finally{try{s||null==i.return||i.return()}finally{if(r)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{vfUp:function(t,s,a){"use strict";a.r(s),a.d(s,"CustomersModule",(function(){return st}));var c=a("ofXK"),i=a("PCNd"),u=a("kt0X"),o=function(t){return t.RequestRequests="[Customers] LoadAppointments",t.UpdateRequests="[Customers] LoadAppointments Success",t.RequestsFail="[Customers] LoadAppointments Fail",t.SetAppointmentFilterStatus="[Customers] Set Appointment Status",t.SetAppointmentFilterDate="[Customers] Set Appointment Date",t.SetSelectedRequestId="[Customers] Set Selected Request ID",t}({}),l=function t(){r(this,t),this.type=o.RequestRequests},d=function t(e){r(this,t),this.payload=e,this.type=o.UpdateRequests},p=function t(e){r(this,t),this.payload=e,this.type=o.RequestsFail},f=function(t){return t[t.All=0]="All",t[t.Pending=1]="Pending",t[t.Accepted=2]="Accepted",t[t.Rejected=3]="Rejected",t}({}),b=function t(e){r(this,t),this.payload=e,this.type=o.SetAppointmentFilterStatus},m=function(t){return t[t.All=0]="All",t[t.Future=1]="Future",t[t.Past=2]="Past",t}({}),h=function t(e){r(this,t),this.payload=e,this.type=o.SetAppointmentFilterDate},g=function t(e){r(this,t),this.id=e,this.type=o.SetSelectedRequestId},y=a("wd/R"),q={appointmentsFilter:{from_date:y.utc()},requests:[],selectedRequestId:null,apiError:null};function v(t,e){var n=Object.assign({},t);switch(e){case f.All:delete n.status;break;case f.Pending:n.status="P";break;case f.Accepted:n.status="A";break;case f.Rejected:n.status="R"}return n}function j(t,e){var n=Object.assign({},t);switch(delete n.to_date,delete n.from_date,e){case m.All:break;case m.Future:n.from_date=y.utc();break;case m.Past:n.to_date=y.utc()}return n}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case o.UpdateRequests:return Object.assign(Object.assign({},t),{requests:e.payload,apiError:null});case o.RequestsFail:return Object.assign(Object.assign({},t),{requests:[],apiError:e.payload});case o.SetAppointmentFilterStatus:return Object.assign(Object.assign({},t),{appointmentsFilter:v(t.appointmentsFilter,e.payload)});case o.SetAppointmentFilterDate:return Object.assign(Object.assign({},t),{appointmentsFilter:j(t.appointmentsFilter,e.payload)});case o.SetSelectedRequestId:return Object.assign(Object.assign({},t),{selectedRequestId:e.id});default:return t}}var k,w=Object(u.o)("customers"),C=(Object(u.q)(w,(function(t){return t.apiError})),Object(u.q)(w,(function(t){return t.requests}))),F=Object(u.q)(w,(function(t){return t})),A=Object(u.q)(w,(function(t){return t.selectedRequestId})),R=Object(u.q)(C,A,(function(t,e){return t.find((function(t){return t.id===e}))})),S=a("snw9"),P=a("mrSG"),W=a("LRne"),I=a("zp1y"),V=a("5+tZ"),D=a("lJxs"),$=a("JIr8"),x=a("fXoL"),E=a("2Sd8"),_=a("3WbM"),G=((k=function t(e,s,a,c){var i=this;r(this,t),this.actions$=e,this.store=s,this.requestClient=a,this.toastService=c,this.RequestRequests$=this.actions$.pipe(Object(S.e)(o.RequestRequests),Object(I.a)(this.store.pipe(Object(u.t)(F))),Object(V.a)((function(t){var e=n(t,2),s=(e[0],e[1]);return i.requestClient.get(s).pipe(Object(D.a)((function(t){return new d(t.results)})),Object($.a)((function(t){return Object(W.a)(new p(t))})))})))}).\u0275fac=function(t){return new(t||k)(x.ac(S.a),x.ac(u.h),x.ac(E.h),x.ac(_.a))},k.\u0275prov=x.Mb({token:k,factory:k.\u0275fac}),Object(P.a)([Object(S.b)()],k.prototype,"RequestRequests$",void 0),k),M=a("LjFu"),L=a("tyNb"),U=a("jaxi"),J=a("3lmY"),K=a("6t+O"),N=a("vqYj");function X(t,e){if(1&t&&x.Rb(0,"shared-company-avatar",1),2&t){var n=e.ngIf;x.oc("logo",n.avatarUrl)("name",n.name)("address",n.address)}}var T,Y=((T=function t(){r(this,t)}).\u0275fac=function(t){return new(t||T)},T.\u0275cmp=x.Kb({type:T,selectors:[["customers-request-card"]],inputs:{request:"request"},decls:1,vars:1,consts:[[3,"logo","name","address",4,"ngIf"],[3,"logo","name","address"]],template:function(t,e){1&t&&x.Ec(0,X,1,3,"shared-company-avatar",0),2&t&&x.oc("ngIf",e.request.owner)},directives:[c.l,N.a],styles:["div.card[_ngcontent-%COMP%]{max-width:40rem}img[_ngcontent-%COMP%]{border-radius:50%;-o-object-fit:cover;object-fit:cover;width:100px;height:100px}"]}),T);function z(t,e){if(1&t){var n=x.Xb();x.Wb(0,"customers-request-card",10),x.ec("click",(function(){x.yc(n);var t=e.$implicit;return x.ic().select.emit(t.id)})),x.Vb()}2&t&&x.oc("request",e.$implicit)}var Q,Z,B,H,tt=((Q=function(){function t(){r(this,t),this.statusChange=new x.o,this.dateFrameChange=new x.o,this.select=new x.o}return e(t,[{key:"dateAll",value:function(){this.dateFrameChange.emit(m.All)}},{key:"datePast",value:function(){this.dateFrameChange.emit(m.Past)}},{key:"dateFuture",value:function(){this.dateFrameChange.emit(m.Future)}},{key:"statusAll",value:function(){this.statusChange.emit(f.All)}},{key:"statusPending",value:function(){this.statusChange.emit(f.Pending)}},{key:"statusConfirmed",value:function(){this.statusChange.emit(f.Accepted)}},{key:"statusCanceled",value:function(){this.statusChange.emit(f.Rejected)}}]),t}()).\u0275fac=function(t){return new(t||Q)},Q.\u0275cmp=x.Kb({type:Q,selectors:[["customers-requests"]],inputs:{requests:"requests",selected:"selected"},outputs:{statusChange:"statusChange",dateFrameChange:"dateFrameChange",select:"select"},decls:21,vars:5,consts:[[1,"container","align-self-center","pt-4"],[1,"row"],[1,"col-md-6","col-sm-12","text-center"],[1,"mr-2"],[3,"click"],[3,"checked","click"],[1,"ml-2",3,"value"],[3,"request","click",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-12"],[3,"request"],[3,"request","click"]],template:function(t,e){1&t&&(x.Wb(0,"div",0),x.Wb(1,"div",1),x.Wb(2,"div",2),x.Wb(3,"mat-button-toggle-group",3),x.Wb(4,"mat-button-toggle",4),x.ec("click",(function(){return e.datePast()})),x.Gc(5,"past"),x.Vb(),x.Wb(6,"mat-button-toggle",5),x.ec("click",(function(){return e.dateFuture()})),x.Gc(7,"upcoming"),x.Vb(),x.Vb(),x.Wb(8,"mat-button-toggle-group",6),x.Wb(9,"mat-button-toggle",5),x.ec("click",(function(){return e.statusAll()})),x.Gc(10,"all"),x.Vb(),x.Wb(11,"mat-button-toggle",4),x.ec("click",(function(){return e.statusPending()})),x.Gc(12,"pending"),x.Vb(),x.Wb(13,"mat-button-toggle",4),x.ec("click",(function(){return e.statusConfirmed()})),x.Gc(14,"confirmed"),x.Vb(),x.Wb(15,"mat-button-toggle",4),x.ec("click",(function(){return e.statusCanceled()})),x.Gc(16,"canceled"),x.Vb(),x.Vb(),x.Wb(17,"app-kalendario-card"),x.Ec(18,z,1,1,"customers-request-card",7),x.Vb(),x.Vb(),x.Wb(19,"div",8),x.Rb(20,"company-request",9),x.Vb(),x.Vb(),x.Vb()),2&t&&(x.Db(6),x.oc("checked",!0),x.Db(2),x.oc("value",0),x.Db(1),x.oc("checked",!0),x.Db(9),x.oc("ngForOf",e.requests),x.Db(2),x.oc("request",e.selected))},directives:[U.b,U.a,J.a,c.k,K.a,Y],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:64px;bottom:0;left:0;right:0}"]}),Q),et=[{path:"requests",component:(Z=function(){function t(e){r(this,t),this.store=e}return e(t,[{key:"ngOnInit",value:function(){this.store.dispatch(new l),this.requests$=this.store.pipe(Object(u.t)(C)),this.selected$=this.store.pipe(Object(u.t)(R))}},{key:"updateStatus",value:function(t){this.store.dispatch(new b(t))}},{key:"updateDateFrame",value:function(t){this.store.dispatch(new h(t))}},{key:"selectRequest",value:function(t){this.store.dispatch(new g(t))}}]),t}(),Z.\u0275fac=function(t){return new(t||Z)(x.Qb(u.h))},Z.\u0275cmp=x.Kb({type:Z,selectors:[["app-requests-page"]],decls:3,vars:6,consts:[[3,"requests","selected","statusChange","dateFrameChange","select"]],template:function(t,e){1&t&&(x.Wb(0,"customers-requests",0),x.ec("statusChange",(function(t){return e.updateStatus(t)}))("dateFrameChange",(function(t){return e.updateDateFrame(t)}))("select",(function(t){return e.selectRequest(t)})),x.jc(1,"async"),x.jc(2,"async"),x.Vb()),2&t&&x.oc("requests",x.kc(1,2,e.requests$))("selected",x.kc(2,4,e.selected$))},directives:[tt],pipes:[c.b],styles:[""]}),Z),canActivate:[M.a]}],nt=((H=function t(){r(this,t)}).\u0275mod=x.Ob({type:H}),H.\u0275inj=x.Nb({factory:function(t){return new(t||H)},imports:[[L.f.forChild(et)],L.f]}),H),st=((B=function t(){r(this,t)}).\u0275mod=x.Ob({type:B}),B.\u0275inj=x.Nb({factory:function(t){return new(t||B)},imports:[[c.c,i.a,nt,u.j.forFeature("customers",O),S.c.forFeature([G])]]}),B)}}])}();