(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{vfUp:function(t,e,n){"use strict";n.r(e),n.d(e,"CustomersModule",(function(){return K}));var a=n("ofXK"),s=n("PCNd"),c=n("kt0X"),o=function(t){return t.LoadAppointments="[Customers] LoadAppointments",t.LoadAppointmentsSuccess="[Customers] LoadAppointments Success",t.LoadAppointmentsFail="[Customers] LoadAppointments Fail",t.SetAppointmentFilterStatus="[Customers] Set Appointment Status",t.SetAppointmentFilterDate="[Customers] Set Appointment Date",t}({});class i{constructor(){this.type=o.LoadAppointments}}class p{constructor(t){this.payload=t,this.type=o.LoadAppointmentsSuccess}}class r{constructor(t){this.payload=t,this.type=o.LoadAppointmentsFail}}var u=function(t){return t[t.All=0]="All",t[t.Pending=1]="Pending",t[t.Accepted=2]="Accepted",t[t.Rejected=3]="Rejected",t}({});class m{constructor(t){this.payload=t,this.type=o.SetAppointmentFilterStatus}}var l=function(t){return t[t.All=0]="All",t[t.Future=1]="Future",t[t.Past=2]="Past",t}({});class b{constructor(t){this.payload=t,this.type=o.SetAppointmentFilterDate}}var d=n("wd/R");const h={appointmentsFilter:{from_date:d.utc()},appointments:[],apiError:null};function g(t,e){let n=Object.assign({},t);switch(e){case u.All:delete n.status;break;case u.Pending:n.status="P";break;case u.Accepted:n.status="A";break;case u.Rejected:n.status="R"}return n}function f(t,e){let n=Object.assign({},t);switch(delete n.to_date,delete n.from_date,e){case l.All:break;case l.Future:n.from_date=d.utc();break;case l.Past:n.to_date=d.utc()}return n}function F(t=h,e){switch(e.type){case o.LoadAppointmentsSuccess:return Object.assign(Object.assign({},t),{appointments:e.payload,apiError:null});case o.LoadAppointmentsFail:return Object.assign(Object.assign({},t),{appointments:[],apiError:e.payload});case o.SetAppointmentFilterStatus:return Object.assign(Object.assign({},t),{appointmentsFilter:g(t.appointmentsFilter,e.payload)});case o.SetAppointmentFilterDate:return Object.assign(Object.assign({},t),{appointmentsFilter:f(t.appointmentsFilter,e.payload)});default:return t}}const j=Object(c.o)("customers"),A=(Object(c.q)(j,t=>t.apiError),Object(c.q)(j,t=>t.appointments)),O=Object(c.q)(j,t=>t.appointmentsFilter);var y=n("snw9"),v=n("mrSG"),C=n("LRne"),w=n("zp1y"),S=n("5+tZ"),W=n("lJxs"),V=n("JIr8"),D=n("fXoL"),k=n("2Sd8"),P=n("3WbM");let L=(()=>{class t{constructor(t,e,n,a){this.actions$=t,this.store=e,this.appointmentClient=n,this.toastService=a,this.LoadAppointments$=this.actions$.pipe(Object(y.e)(o.LoadAppointments),Object(w.a)(this.store.pipe(Object(c.t)(O))),Object(S.a)(([t,e])=>this.appointmentClient.get(e).pipe(Object(W.a)(t=>new p(t.results)),Object(V.a)(t=>Object(C.a)(new r(t)))))),this.SetAppointmentFilterDate$=this.actions$.pipe(Object(y.e)(o.SetAppointmentFilterDate),Object(W.a)(t=>new i)),this.SetAppointmentFilterStatus$=this.actions$.pipe(Object(y.e)(o.SetAppointmentFilterStatus),Object(W.a)(t=>new i))}}return t.\u0275fac=function(e){return new(e||t)(D.ac(y.a),D.ac(c.h),D.ac(k.c),D.ac(P.a))},t.\u0275prov=D.Mb({token:t,factory:t.\u0275fac}),Object(v.a)([Object(y.b)()],t.prototype,"LoadAppointments$",void 0),Object(v.a)([Object(y.b)()],t.prototype,"SetAppointmentFilterDate$",void 0),Object(v.a)([Object(y.b)()],t.prototype,"SetAppointmentFilterStatus$",void 0),t})();var x=n("LjFu"),$=n("tyNb"),H=n("jaxi"),M=n("7EHt"),N=n("NFeN");let R=(()=>{class t{transform(t,...e){switch(t){case"A":return"accepted";case"M":return"rejected";default:return"pending"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=D.Pb({name:"appointmentStatus",type:t,pure:!0}),t})(),_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Kb({type:t,selectors:[["customers-appointment-card"]],inputs:{appointment:"appointment"},decls:24,vars:12,consts:[[1,"card","m-auto"],[1,"m-auto"],[1,"col-sm-12","col-md-6","d-flex","align-self-center"],[1,"col-sm-12","col-md-6","m-auto"],[1,"row","text-left"],[1,"col-4"],[3,"src"],[1,"text-muted"]],template:function(t,e){1&t&&(D.Wb(0,"div",0),D.Wb(1,"mat-expansion-panel"),D.Wb(2,"mat-expansion-panel-header"),D.Wb(3,"mat-panel-title",1),D.Fc(4),D.Vb(),D.Wb(5,"mat-panel-description"),D.Wb(6,"div",2),D.Wb(7,"mat-icon"),D.Fc(8,"event"),D.Vb(),D.Fc(9),D.Vb(),D.Wb(10,"div",3),D.Fc(11),D.Vb(),D.Vb(),D.Vb(),D.Wb(12,"div",4),D.Wb(13,"div",5),D.Rb(14,"img",6),D.Vb(),D.Wb(15,"div",5),D.Wb(16,"h4"),D.Fc(17),D.Vb(),D.Wb(18,"h4",7),D.Fc(19),D.Vb(),D.Fc(20),D.Vb(),D.Wb(21,"div",5),D.Fc(22),D.jc(23,"appointmentStatus"),D.Vb(),D.Vb(),D.Vb(),D.Vb()),2&t&&(D.Db(4),D.Hc(" ",e.appointment.companyName," "),D.Db(5),D.Hc(" ",e.appointment.start.format("DD/MM/YY")," "),D.Db(2),D.Ic(" ",e.appointment.start.format("HH:mm")," ",e.appointment.end.format("HH:mm")," "),D.Db(3),D.oc("src",e.appointment.employee.photoUrl,D.yc),D.Db(3),D.Gc(e.appointment.employee.name),D.Db(2),D.Hc(" ",e.appointment.service.name," "),D.Db(1),D.Hc(" ",e.appointment.customerNotes," "),D.Db(2),D.Ic(" ",D.kc(23,10,e.appointment.status)," ",e.appointment.customerNotes," "))},directives:[M.b,M.d,M.e,M.c,N.a],pipes:[R],styles:["div.card[_ngcontent-%COMP%]{max-width:40rem}img[_ngcontent-%COMP%]{border-radius:50%;-o-object-fit:cover;object-fit:cover;width:100px;height:100px}"]}),t})();function E(t,e){1&t&&D.Rb(0,"customers-appointment-card",8),2&t&&D.nc("appointment",e.$implicit)}let q=(()=>{class t{constructor(){this.statusChange=new D.o,this.dateFrameChange=new D.o}dateAll(){this.dateFrameChange.emit(l.All)}datePast(){this.dateFrameChange.emit(l.Past)}dateFuture(){this.dateFrameChange.emit(l.Future)}statusAll(){this.statusChange.emit(u.All)}statusPending(){this.statusChange.emit(u.Pending)}statusConfirmed(){this.statusChange.emit(u.Accepted)}statusCanceled(){this.statusChange.emit(u.Rejected)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=D.Kb({type:t,selectors:[["customers-appointments"]],inputs:{appointments:"appointments"},outputs:{statusChange:"statusChange",dateFrameChange:"dateFrameChange"},decls:20,vars:4,consts:[[1,"container","align-self-center","pt-4"],[1,"row"],[1,"col-12","text-center"],[1,"mr-2"],[3,"click"],[3,"checked","click"],[1,"ml-2",3,"value"],["class","col-12 m-1",3,"appointment",4,"ngFor","ngForOf"],[1,"col-12","m-1",3,"appointment"]],template:function(t,e){1&t&&(D.Wb(0,"div",0),D.Wb(1,"div",1),D.Wb(2,"div",2),D.Wb(3,"mat-button-toggle-group",3),D.Wb(4,"mat-button-toggle",4),D.ec("click",(function(){return e.dateAll()})),D.Fc(5,"all"),D.Vb(),D.Wb(6,"mat-button-toggle",4),D.ec("click",(function(){return e.datePast()})),D.Fc(7,"past"),D.Vb(),D.Wb(8,"mat-button-toggle",5),D.ec("click",(function(){return e.dateFuture()})),D.Fc(9,"future"),D.Vb(),D.Vb(),D.Wb(10,"mat-button-toggle-group",6),D.Wb(11,"mat-button-toggle",5),D.ec("click",(function(){return e.statusAll()})),D.Fc(12,"all"),D.Vb(),D.Wb(13,"mat-button-toggle",4),D.ec("click",(function(){return e.statusPending()})),D.Fc(14,"pending"),D.Vb(),D.Wb(15,"mat-button-toggle",4),D.ec("click",(function(){return e.statusConfirmed()})),D.Fc(16,"confirmed"),D.Vb(),D.Wb(17,"mat-button-toggle",4),D.ec("click",(function(){return e.statusCanceled()})),D.Fc(18,"canceled"),D.Vb(),D.Vb(),D.Vb(),D.Dc(19,E,1,1,"customers-appointment-card",7),D.Vb(),D.Vb()),2&t&&(D.Db(8),D.nc("checked",!0),D.Db(2),D.nc("value",0),D.Db(1),D.nc("checked",!0),D.Db(8),D.nc("ngForOf",e.appointments))},directives:[H.b,H.a,a.j,_],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:64px;bottom:0;left:0;right:0}"]}),t})();const I=[{path:"requests",component:(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.store.dispatch(new i),this.appointments$=this.store.pipe(Object(c.t)(A))}updateStatus(t){this.store.dispatch(new m(t))}updateDateFrame(t){this.store.dispatch(new b(t))}}return t.\u0275fac=function(e){return new(e||t)(D.Qb(c.h))},t.\u0275cmp=D.Kb({type:t,selectors:[["app-appointments-page"]],decls:2,vars:3,consts:[[3,"appointments","statusChange","dateFrameChange"]],template:function(t,e){1&t&&(D.Wb(0,"customers-appointments",0),D.ec("statusChange",(function(t){return e.updateStatus(t)}))("dateFrameChange",(function(t){return e.updateDateFrame(t)})),D.jc(1,"async"),D.Vb()),2&t&&D.nc("appointments",D.kc(1,1,e.appointments$))},directives:[q],pipes:[a.b],styles:[""]}),t})(),canActivate:[x.a]}];let J=(()=>{class t{}return t.\u0275mod=D.Ob({type:t}),t.\u0275inj=D.Nb({factory:function(e){return new(e||t)},imports:[[$.f.forChild(I)],$.f]}),t})(),K=(()=>{class t{}return t.\u0275mod=D.Ob({type:t}),t.\u0275inj=D.Nb({factory:function(e){return new(e||t)},imports:[[a.c,s.a,J,c.j.forFeature("customers",F),y.c.forFeature([L])]]}),t})()}}]);